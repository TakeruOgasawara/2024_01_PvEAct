//===========================================================================================
// 
// シーン処理[scene.cpp]
// Author : Takeru Ogasawara
// 
//===========================================================================================

#include "renderer.h"
#include "manager.h"
#include "scene.h"
#include "title.h"
#include "game.h"
#include "result.h"
#include "camera.h"

//===========================================================================================
// コンストラクタ
//===========================================================================================
CScene::CScene()
{
	m_mode = MODE_TITLE;
}

//===========================================================================================
// デストラクタ
//===========================================================================================
CScene::~CScene()
{

}

//===========================================================================================
// シーンの生成
//===========================================================================================
CScene* CScene::Create(EMode mode)
{
	CScene* pScene = nullptr;

	if (pScene == nullptr)
	{
		//モード別の生成
		switch (mode)
		{
		case MODE_TITLE:
			pScene = new CTitle;
			break;

		case MODE_GAME:
			pScene = new CGame;
			break;

		case MODE_RESULT:
			pScene = new CResult;
			break;
		}
	}

	return pScene;
}

//===========================================================================================
// 初期化処理
//===========================================================================================
HRESULT CScene::Init(void)
{
	return S_OK;
}

//===========================================================================================
// 終了処理
//===========================================================================================
void CScene::Uninit(void)
{

}

//===========================================================================================
// 更新処理
//===========================================================================================
void CScene::Update(void)
{
	//　カメラの更新処理
	if (CManager::GetInstance()->GetCamera() != nullptr)
	{
		CManager::GetInstance()->GetCamera()->Update();
	}

	//　レンダラーの更新処理
	if (CManager::GetInstance()->GetRenderer() != nullptr)
	{
		CManager::GetInstance()->GetRenderer()->Update();
	}
}

//===========================================================================================
// 描画処理
//===========================================================================================
void CScene::Draw(void)
{
	if (CManager::GetInstance()->GetRenderer() != nullptr)
	{
		CManager::GetInstance()->GetRenderer()->Draw();
	}
}